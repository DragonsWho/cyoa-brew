{
  "meta": {
    "title": "Test CYOA - New Page Architecture"
  },
  "points": [
    { "id": "points", "name": "Points", "start": 50 }
  ],
  "pages": [
    {
      "id": "page_0",
      "image": "config/test_image.avif",
      "layout": [
        {
          "type": "group",
          "id": "modifiers",
          "title": "Global Modifiers",
          "coords": { "x": 50, "y": 50, "w": 1200, "h": 150 },
          "items": [
            {
              "type": "item",
              "id": "backpack",
              "title": "Magic Backpack",
              "description": "Increases limit in 'Choose Only 1' by +2.\nAllows you to pick A, B, and C!",
              "coords": { "x": 50, "y": 50, "w": 350, "h": 120 },
              "cost": [{ "currency": "points", "value": -5 }],
              "effects": [
                {
                  "type": "modify_group_limit",
                  "group_id": "max_choices",
                  "value": 2
                }
              ]
            },
            {
              "type": "item",
              "id": "merchant_ring",
              "title": "Merchant Ring",
              "description": "All 'Magic' items cost 50% less!\nWatch the prices of Fire/Ice change.",
              "coords": { "x": 420, "y": 50, "w": 350, "h": 120 },
              "cost": [{ "currency": "points", "value": -10 }],
              "effects": [
                {
                  "type": "modify_cost",
                  "tag": "magic",
                  "mode": "multiply",
                  "value": 0.5
                }
              ]
            },
            {
              "type": "item",
              "id": "gamblers_coin",
              "title": "Gambler's Coin",
              "description": "Feeling Lucky?\nRolls a D20 for bonus points!",
              "coords": { "x": 790, "y": 50, "w": 350, "h": 120 },
              "cost": [],
              "effects": [
                { "type": "roll_dice", "min": 1, "max": 20, "currency": "points" }
              ]
            }
          ]
        },
        {
          "type": "group",
          "id": "magic_shop",
          "title": "Magic Shop (Tags Test)",
          "coords": { "x": 50, "y": 220, "w": 1200, "h": 200 },
          "items": [
            {
              "type": "item",
              "id": "fire_scroll",
              "title": "Fire Scroll",
              "tags": ["magic", "fire"],
              "description": "Tags: Magic, Fire\nCost: 10 (5 with Ring)",
              "coords": { "x": 50, "y": 250, "w": 350, "h": 150 },
              "cost": [{ "currency": "points", "value": -10 }]
            },
            {
              "type": "item",
              "id": "ice_scroll",
              "title": "Ice Scroll",
              "tags": ["magic", "ice"],
              "description": "Tags: Magic, Ice\nCost: 10 (5 with Ring)",
              "coords": { "x": 420, "y": 250, "w": 350, "h": 150 },
              "cost": [{ "currency": "points", "value": -10 }]
            },
            {
              "type": "item",
              "id": "master_spell",
              "title": "Master Spell",
              "description": "Requires 2 items with 'magic' tag.",
              "coords": { "x": 790, "y": 250, "w": 350, "h": 150 },
              "cost": [{ "currency": "points", "value": -20 }],
              "requirements": ["count.tag('magic') >= 2"]
            }
          ]
        },
        {
          "type": "group",
          "id": "max_choices",
          "title": "Choose Only 1 (Limit Test)",
          "coords": { "x": 1310, "y": 220, "w": 560, "h": 640 },
          "rules": { "max_choices": 1 },
          "items": [
            {
              "type": "item",
              "id": "choice_a",
              "title": "Choice A",
              "coords": { "x": 1330, "y": 250, "w": 520, "h": 150 },
              "cost": []
            },
            {
              "type": "item",
              "id": "choice_b",
              "title": "Choice B",
              "coords": { "x": 1330, "y": 420, "w": 520, "h": 150 },
              "cost": []
            },
            {
              "type": "item",
              "id": "choice_c",
              "title": "Choice C",
              "coords": { "x": 1330, "y": 590, "w": 520, "h": 150 },
              "cost": []
            }
          ]
        },
        {
          "type": "group",
          "id": "paid_items",
          "title": "Misc Items",
          "coords": { "x": 50, "y": 440, "w": 1200, "h": 200 },
          "items": [
            {
              "type": "item",
              "id": "cheap",
              "title": "Cheap Item",
              "coords": { "x": 50, "y": 470, "w": 350, "h": 150 },
              "cost": [{ "currency": "points", "value": -1 }]
            }
          ]
        }
      ]
    }
  ]
}